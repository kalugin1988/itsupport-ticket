<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –®–∫–æ–ª—ã ‚Ññ25</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <header>
            <div class="header-left">
                <h1 id="appName">–°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –®–∫–æ–ª—ã ‚Ññ25</h1>
                <p class="subtitle" id="appSubtitle">–°–ª—É–∂–±–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏</p>
            </div>
            <div class="user-info">
                <div class="user-details">
                    <span id="userFullName" class="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    <span id="userRole" class="user-role"></span>
                </div>
                <button id="logoutBtn" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
            </div>
        </header>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav>
            <a href="#" class="nav-link active" data-page="create">
                <span class="nav-icon">‚ûï</span>
                <span class="nav-text">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</span>
            </a>
            <a href="#" class="nav-link" data-page="my-tickets">
                <span class="nav-icon">üìã</span>
                <span class="nav-text">–ú–æ–∏ –∑–∞—è–≤–∫–∏</span>
            </a>
            <a href="#" class="nav-link admin-only" data-page="admin" style="display: none;">
                <span class="nav-icon">‚öôÔ∏è</span>
                <span class="nav-text">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</span>
            </a>
        </nav>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main>
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ -->
            <div id="create-page" class="page active">
                <p class="page-description">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –Ω–∏–∂–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–∏. –í—Å–µ –ø–æ–ª—è, –æ—Ç–º–µ—á–µ–Ω–Ω—ã–µ *, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.</p>
                
                <form id="ticketForm">
                    <div class="form-group">
                        <label for="problemType">
                            –¢–∏–ø –ø—Ä–æ–±–ª–µ–º—ã *
                            <span class="hint">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ —Å–ø–∏—Å–∫–∞</span>
                        </label>
                        <select id="problemType" name="problem_type_id" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="cabinet">
                            –ù–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ *
                            <span class="hint">–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞</span>
                        </label>
                        <div class="cabinet-field">
                            <input type="text" id="cabinet" name="cabinet" list="cabinetList" 
                                   placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 205" required>
                            <datalist id="cabinetList"></datalist>
                            <button type="button" id="addCabinetBtn" class="btn btn-secondary admin-only" style="display: none;">
                                –î–æ–±–∞–≤–∏—Ç—å –∫–∞–±–∏–Ω–µ—Ç
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="phone">
                            –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏
                            <span class="hint">–£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏</span>
                        </label>
                        <div class="contact-field">
                            <input type="tel" id="phone" name="phone" 
                                   placeholder="+7 (912) 272-60-19">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">
                            Email –∞–¥—Ä–µ—Å
                            <span class="hint">–£–∫–∞–∂–∏—Ç–µ email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</span>
                        </label>
                        <div class="contact-field">
                            <input type="email" id="email" name="email" 
                                   placeholder="kalugin66@ya.ru">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">
                            –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã *
                            <span class="hint">–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É, —Å –∫–æ—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å</span>
                        </label>
                        <textarea id="description" name="description" rows="4" 
                                  placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ..." required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="comments">
                            –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                            <span class="hint">–õ—é–±–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</span>
                        </label>
                        <textarea id="comments" name="comments" rows="3" 
                                  placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="files">
                            –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
                            <span class="hint">–ú–∞–∫—Å–∏–º—É–º 7 —Ñ–∞–π–ª–æ–≤, –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –¥–æ 50MB</span>
                        </label>
                        <input type="file" id="files" name="files" multiple 
                               accept="image/*,.pdf,.doc,.docx,.xls,.xlsx,.txt">
                        <div id="fileList" class="files-list"></div>
                        <p class="file-hint">–†–∞–∑—Ä–µ—à–µ–Ω—ã: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, PDF, –¥–æ–∫—É–º–µ–Ω—Ç—ã Word/Excel</p>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <span class="btn-icon">üì®</span>
                            –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
                        </button>
                        <button type="reset" class="btn btn-secondary">
                            <span class="btn-icon">üóëÔ∏è</span>
                            –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É
                        </button>
                    </div>
                </form>
            </div>
            
            <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–æ–∏—Ö –∑–∞—è–≤–æ–∫ -->
            <div id="my-tickets-page" class="page">
                <p class="page-description">–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –≤–∞—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏.</p>
                <div id="ticketsContainer">
                    <div id="ticketsList"></div>
                    <div id="noTickets" class="no-tickets" style="display: none;">
                        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫</p>
                        <a href="#" class="btn btn-primary" data-page="create">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞—è–≤–∫—É</a>
                    </div>
                </div>
            </div>
            
            <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
            <div id="admin-page" class="page">
                <h2><span class="page-icon">‚öôÔ∏è</span> –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
                <p class="page-description">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ–º–∏ –∑–∞—è–≤–∫–∞–º–∏ —Å–∏—Å—Ç–µ–º—ã. –¢–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.</p>
                
                <div class="admin-controls">
                    <div class="admin-stats" id="adminStats">
                        <div class="stat-item">
                            <span class="stat-value" id="totalTickets">0</span>
                            <span class="stat-label">–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="openTickets">0</span>
                            <span class="stat-label">–û—Ç–∫—Ä—ã—Ç—ã–µ</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="inProgressTickets">0</span>
                            <span class="stat-label">–í —Ä–∞–±–æ—Ç–µ</span>
                        </div>
                    </div>
                    
                    <div class="admin-filters">
                        <input type="text" id="searchTickets" placeholder="–ü–æ–∏—Å–∫ –∑–∞—è–≤–æ–∫..." class="search-input">
                        <select id="filterStatus" class="filter-select">
                            <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                            <option value="–æ—Ç–∫—Ä—ã—Ç–∞">–û—Ç–∫—Ä—ã—Ç–∞</option>
                            <option value="–≤ —Ä–∞–±–æ—Ç–µ">–í —Ä–∞–±–æ—Ç–µ</option>
                            <option value="–Ω–∞–∑–Ω–∞—á–µ–Ω–∞">–ù–∞–∑–Ω–∞—á–µ–Ω–∞</option>
                            <option value="—Ç—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è">–¢—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è</option>
                            <option value="–æ—Ç–ª–æ–∂–µ–Ω–∞">–û—Ç–ª–æ–∂–µ–Ω–∞</option>
                            <option value="–≤—ã–ø–æ–ª–Ω–µ–Ω–∞">–í—ã–ø–æ–ª–Ω–µ–Ω–∞</option>
                            <option value="–∑–∞–∫—Ä—ã—Ç–∞">–ó–∞–∫—Ä—ã—Ç–∞</option>
                            <option value="–æ—Ç–∫–∞–∑–∞–Ω–∞">–û—Ç–∫–∞–∑–∞–Ω–∞</option>
                        </select>
                    </div>
                </div>
                
                <div id="adminTicketsContainer">
                    <div class="loading" id="loadingAdminTickets">
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫...</p>
                    </div>
                    <table id="adminTicketsTable" class="tickets-table" style="display: none;">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                <th>–¢–∏–ø</th>
                                <th>–ö–∞–±–∏–Ω–µ—Ç</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                            </tr>
                        </thead>
                        <tbody id="adminTicketsBody"></tbody>
                    </table>
                    <div id="noAdminTickets" class="no-tickets" style="display: none;">
                        <p>–ù–µ—Ç –∑–∞—è–≤–æ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</p>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- –§—É—Ç–µ—Ä -->
        <footer>
            <p id="footerText">
                –°–ª—É–∂–±–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –®–∫–æ–ª—ã ‚Ññ25 | –í–µ—Ä—Å–∏—è: <span id="appVersion">0.2</span>
            </p>
            <p class="footer-info" id="footerInfo">
            –ü–æ–¥–¥–µ—Ä–∂–∫–∞: <a href="mailto:kalugin66@ya.ru" id="supportEmail">kalugin66@ya.ru</a> 
            | –¢–µ–ª: <span id="supportPhone">+7 (912) 272-60-19</span>
            </p>
            <p id="footerText">&copy; 2025. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </footer>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –∑–∞—è–≤–∫–∏ -->
    <div id="ticketDetailsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ #<span id="modalTicketId"></span></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modalTicketDetails">
                <!-- –î–µ—Ç–∞–ª–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–∞–π–ª–æ–≤ -->
    <div id="filesModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–§–∞–π–ª—ã –∑–∞—è–≤–∫–∏ #<span id="filesTicketId"></span></h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="filesList" class="files-list"></div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è -->
    <div id="assignModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="assignForm">
                    <input type="hidden" id="assignTicketId">
                    <div class="form-group">
                        <label for="assignMainExecutor">–ì–ª–∞–≤–Ω—ã–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å *</label>
                        <input type="text" id="assignMainExecutor" required>
                    </div>
                    <div class="form-group">
                        <label for="assignExecutor">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</label>
                        <input type="text" id="assignExecutor">
                    </div>
                    <div class="form-group">
                        <label for="assignComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é</label>
                        <textarea id="assignComment" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">–ù–∞–∑–Ω–∞—á–∏—Ç—å</button>
                        <button type="button" class="btn btn-secondary modal-close">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ -->
    <div id="statusModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <form id="statusForm">
                    <input type="hidden" id="statusTicketId">
                    <div class="form-group">
                        <label for="newStatus">–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å *</label>
                        <select id="newStatus" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å...</option>
                            <option value="–æ—Ç–∫—Ä—ã—Ç–∞">–û—Ç–∫—Ä—ã—Ç–∞</option>
                            <option value="–≤ —Ä–∞–±–æ—Ç–µ">–í —Ä–∞–±–æ—Ç–µ</option>
                            <option value="–Ω–∞–∑–Ω–∞—á–µ–Ω–∞">–ù–∞–∑–Ω–∞—á–µ–Ω–∞</option>
                            <option value="—Ç—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è">–¢—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è</option>
                            <option value="–æ—Ç–ª–æ–∂–µ–Ω–∞">–û—Ç–ª–æ–∂–µ–Ω–∞</option>
                            <option value="–≤—ã–ø–æ–ª–Ω–µ–Ω–∞">–í—ã–ø–æ–ª–Ω–µ–Ω–∞</option>
                            <option value="–∑–∞–∫—Ä—ã—Ç–∞">–ó–∞–∫—Ä—ã—Ç–∞</option>
                            <option value="–æ—Ç–∫–∞–∑–∞–Ω–∞">–û—Ç–∫–∞–∑–∞–Ω–∞</option>
                            <option value="–∞—Ä—Ö–∏–≤">–ê—Ä—Ö–∏–≤</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="statusComment">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Å—Ç–∞—Ç—É—Å–∞</label>
                        <textarea id="statusComment" rows="3"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
                        <button type="button" class="btn btn-secondary modal-close">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç—ã -->
    <script src="/scripts/utils.js"></script>
    <script src="/scripts/auth.js"></script>
    <script src="/scripts/ticket.js"></script>
    <script src="/scripts/dashboard.js"></script>
    
    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
        async function loadAppInfo() {
            try {
                const response = await fetch('/api/app-info');
                if (response.ok) {
                    const data = await response.json();
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                    document.title = data.name;
                    document.getElementById('appName').textContent = data.name;
                    document.getElementById('footerText').textContent = 
                        `${data.name} ¬© ${new Date().getFullYear()}. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.`;
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≤–µ—Ä—Å–∏—é
                    if (data.version) {
                        document.getElementById('appVersion').textContent = data.version;
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
                    if (data.supportEmail) {
                        const emailLink = document.getElementById('supportEmail');
                        emailLink.href = `mailto:${data.supportEmail}`;
                        emailLink.textContent = data.supportEmail;
                    }
                    
                    if (data.supportPhone) {
                        document.getElementById('supportPhone').textContent = data.supportPhone;
                    }
                    
                    return data;
                }
            } catch (error) {
                console.error('Error loading app info:', error);
            }
            return null;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', async () => {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
            await loadAppInfo();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏
            if (typeof initApp === 'function') {
                initApp();
            }
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ —Ñ–∞–π–ª–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é
        function getFileIcon(fileName) {
            const ext = fileName.split('.').pop().toLowerCase();
            const iconMap = {
                'jpg': 'üñºÔ∏è', 'jpeg': 'üñºÔ∏è', 'png': 'üñºÔ∏è', 'gif': 'üñºÔ∏è', 'bmp': 'üñºÔ∏è',
                'pdf': 'üìÑ',
                'doc': 'üìù', 'docx': 'üìù',
                'xls': 'üìä', 'xlsx': 'üìä',
                'txt': 'üìÉ'
            };
            return iconMap[ext] || 'üìé';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message, type = 'info') {
            // –£–¥–∞–ª—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const oldNotifications = document.querySelectorAll('.notification');
            oldNotifications.forEach(n => n.remove());
            
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 1000;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                animation: slideIn 0.3s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            // –£–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 5000);
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
            
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            .fade-in {
                animation: fadeIn 0.5s ease-in;
            }
            
            .files-list {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                margin-top: 15px;
            }
            
            .file-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px 15px;
                background: #f8f9fa;
                border-radius: 8px;
                border: 1px solid #dee2e6;
                width: 100%;
                max-width: 400px;
            }
            
            .remove-file-btn {
                background: #dc3545;
                color: white;
                border: none;
                border-radius: 50%;
                width: 26px;
                height: 26px;
                cursor: pointer;
                font-size: 18px;
                line-height: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.3s ease;
            }
            
            .remove-file-btn:hover {
                background: #c82333;
            }
            
            .file-link {
                display: flex;
                align-items: center;
                gap: 10px;
                padding: 10px 15px;
                background: #f8f9fa;
                border: 1px solid #dee2e6;
                border-radius: 8px;
                text-decoration: none;
                color: #495057;
                font-size: 15px;
                transition: all 0.3s ease;
            }
            
            .file-link:hover {
                background: #e9ecef;
                text-decoration: none;
                transform: translateY(-1px);
            }
            
            .file-download-btn {
                background: #007bff;
                color: white;
                border: none;
                border-radius: 8px;
                padding: 6px 12px;
                font-size: 13px;
                cursor: pointer;
                text-decoration: none;
                transition: all 0.3s ease;
            }
            
            .file-download-btn:hover {
                background: #0056b3;
                color: white;
            }
        `;
        document.head.appendChild(style);
        
        // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
        window.getFileIcon = getFileIcon;
        window.formatFileSize = formatFileSize;
        window.showNotification = showNotification;
    </script>
</body>
</html>